services:
  datn-fe-app:
    build:
      context: .
      dockerfile: Dockerfile
      target: app-production
      args:
        - VITE_API_URL=${VITE_API_URL}
        - PRESENTATION_URL=${PRESENTATION_URL}
        - NODE_ENV=production
    image: ghcr.io/tien4112004/datn-fe:app-latest
    container_name: frontend-app-aiprimary
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 512M
    ports:
      - '5173:5173'
    networks:
      - network-aiprimary

  datn-fe-presentation:
    build:
      context: .
      dockerfile: Dockerfile
      target: presentation-production
      args:
        - VITE_API_URL=${VITE_API_URL}
        - PRESENTATION_URL=${PRESENTATION_URL}
        - NODE_ENV=production
    image: ghcr.io/tien4112004/datn-fe:presentation-latest
    container_name: frontend-presentation-aiprimary
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 512M
    ports:
      - '5174:5174'
    networks:
      - network-aiprimary

  datn-fe-admin:
    build:
      context: .
      dockerfile: Dockerfile
      target: admin-production
      args:
        - VITE_API_URL=${VITE_API_URL}
        - PRESENTATION_URL=${PRESENTATION_URL}
        - NODE_ENV=production
    image: ghcr.io/tien4112004/datn-fe:admin-latest
    container_name: frontend-admin-aiprimary
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 512M
    ports:
      - '5175:5175'
    networks:
      - network-aiprimary

networks:
  network-aiprimary:
    name: network-aiprimary
    external: true
