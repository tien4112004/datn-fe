openapi: 3.1.0

info:
  title: Mindmap Service API
  description: >-
    This collection provides a set of APIs for managing mindmaps.
  version: 1.0.0
servers:
  - url: http://localhost:8080/api

tags:
  - name: Backend-Server / Mindmaps
    description: Endpoints for managing mindmaps.

paths:
  # Tag Group: Backend Server
  # Tag: Mindmaps
  /images/generate:
    post:
      tags:
        - Backend-Server / Images
      summary: Generate an image based on a prompt
      description: Creates an image using an AI model based on the provided prompt and parameters.
      operationId: generateImage
      requestBody:
        description: Parameters for the image generation
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ImageGenerationRequest"
      responses:
        "200":
          description: Image generated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/AppResponseDto"
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        $ref: "#/components/schemas/ImageGenerationResponse"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/Error"
                  - type: object
                    properties:
                      errorCode:
                        type: string
                        example: "INVALID_IMAGE_PROMPT"
                      message:
                        type: string
                        example: "Invalid prompt or parameters for image generation"
                      code:
                        type: integer
                        example: 400
        "429":
          description: Too Many Requests
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/Error"
                  - type: object
                    properties:
                      errorCode:
                        type: string
                        example: "IMAGE_GENERATION_QUOTA_EXCEEDED"
                      message:
                        type: string
                        example: "Image generation quota has been exceeded"
                      code:
                        type: integer
                        example: 429
        "500":
          description: Internal Server Error - Failed to generate image
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/Error"
                  - type: object
                    properties:
                      errorCode:
                        type: string
                        example: "GENERATION_ERROR"
                      message:
                        type: string
                        example: "An error occurred during content generation"
                      code:
                        type: integer
                        example: 500
  /images/generate-with-idempotency:
    post:
      tags:
        - Backend-Server / Images
      summary: Generate an image based on a prompt with idempotency key
      description: Creates an image using an AI model based on the provided prompt and parameters.
      operationId: generateImageWithIdempotency
      parameters:
        - name: idempotency-key
          in: header
          required: false
          schema:
            type: string
          description: A unique key to ensure idempotent requests.
      requestBody:
        description: Parameters for the image generation
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ImageGenerationRequest"
      responses:
        "200":
          description: Image generated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/AppResponseDto"
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        $ref: "#/components/schemas/ImageGenerationResponse"
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/Error"
                  - type: object
                    properties:
                      errorCode:
                        type: string
                        example: "INVALID_IMAGE_PROMPT"
                      message:
                        type: string
                        example: "Invalid prompt or parameters for image generation"
                      code:
                        type: integer
                        example: 400
        "429":
          description: Too Many Requests
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/Error"
                  - type: object
                    properties:
                      errorCode:
                        type: string
                        example: "IMAGE_GENERATION_QUOTA_EXCEEDED"
                      message:
                        type: string
                        example: "Image generation quota has been exceeded"
                      code:
                        type: integer
                        example: 429
        "500":
          description: Internal Server Error - Failed to generate image
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/Error"
                  - type: object
                    properties:
                      errorCode:
                        type: string
                        example: "GENERATION_ERROR"
                      message:
                        type: string
                        example: "An error occurred during content generation"
                      code:
                        type: integer
                        example: 500
  /images:
    get:
      tags:
        - Backend-Server / Images
      summary: Get All Generated Images
      description: Retrieves a list of all generated images with their metadata.
      operationId: getAllGeneratedImages
      responses:
        "200":
          description: success
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/AppResponseDto"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/MediaResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  /images/{id}:
    get:
      tags:
        - Backend-Server / Images
      summary: Get Generated Image by ID
      description: Retrieves a specific generated image by its unique ID.
      operationId: getGeneratedImageById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: success
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/AppResponseDto"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/MediaResponse"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  
  # Tag: Models
  /models:
    get:
      tags:
        - Backend-Server / Models
      operationId: getAllModels
      parameters:
        - in: query
          name: modelType
          schema:
            type: string
            enum: ["TEXT", "IMAGE"]
          description: Filter models by type (text or image)
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/AppResponseDto"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/ModelResponse"
    patch:
      tags:
        - Backend-Server / Models
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                default:
                  type: boolean
                  description: Whether the model is the default model
                enabled:
                  type: boolean
                  description: Whether the model should be enabled or disabled
      operationId: updateModelStatus
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int32
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                allOf:
                  - $ref: "#/components/schemas/AppResponseDto"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/ModelResponse"
        "404":
          description: Not Found
          content:
            "*/*":
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal Server Error
          content:
            "*/*":
              schema:
                $ref: "#/components/schemas/Error"

  # Tag: Mindmaps
  /mindmaps:
    get:
      tags:
        - Backend-Server / Mindmaps
      summary: Get All Mindmaps
      description: Retrieves paginated list of mindmaps with thumbnails.
      operationId: getAllMindmaps
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number
        - name: pageSize
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: Number of mindmaps per page (1-100)
        - name: filter
          in: query
          schema:
            type: string
            maxLength: 100
          description: Filter mindmaps by title (case-insensitive search)
        - name: sort
          in: query
          schema:
            type: string
            enum: ["asc", "desc"]
            default: "asc"
          description: Sort order - ascending (asc) or descending (desc)
      responses:
        "200":
          description: success
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/AppResponseDto"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                            title:
                              type: string
                            thumbnail:
                              type: string
                              format: uri
                            createdAt:
                              type: string
                              format: date-time
                            updatedAt:
                              type: string
                              format: date-time
                      pagination:
                        $ref: "#/components/schemas/Pagination"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      tags:
        - Backend-Server / Mindmaps
      summary: Create new Mindmap
      description: Creates a new mindmap with default structure.
      operationId: createMindmap
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                  description: The title of the mindmap
                  minLength: 1
                  maxLength: 200
                  example: "My First Mindmap"
                nodes:
                  type: array
                  items:
                    $ref: "#/components/schemas/MindmapNode"
      responses:
        "200":
          description: success
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/AppResponseDto"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Mindmap"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  /mindmaps/{id}:
    get:
      tags:
        - Backend-Server / Mindmaps
      summary: Get Mindmap
      description: Gets a complete mindmap by its ID.
      operationId: getMindmap
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: success
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/AppResponseDto"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/Mindmap"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      tags:
        - Backend-Server / Mindmaps
      summary: Update a Mindmap
      description: Updates a mindmap by replacing the existing resource with the provided data.
      operationId: updateMindmap
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                nodes:
                  type: array
                  items:
                    $ref: "#/components/schemas/MindmapNode"
      responses:
        "204":
          description: No Content
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      tags:
        - Backend-Server / Mindmaps
      summary: Delete a Mindmap
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "204":
          description: No Content
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  /mindmaps/{id}/title:
    patch:
      tags:
        - Backend-Server / Mindmaps
      summary: Update a Mindmap Title
      description: Updates the title or description of an existing mindmap by ID. **Either title or description must be provided.**
      operationId: updateMindmapTitle
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: [string, "null"]
                  description: The new title for the mindmap
                  minLength: 1
                  maxLength: 200
                  example: "Updated Mindmap Title"
                description:
                  type: [string, "null"]
                  description: The new description for the mindmap
                  minLength: 1
                  maxLength: 500
                  example: "This is an updated description for my mindmap."
      responses:
        "204":
          description: No Content
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  # Tag: Authentication
  /auth/signin:
    post:
      tags:
        - Backend-Server / Authentication
      summary: User Login
      description: Authenticates a user and returns a JWT token.
      operationId: userLogin
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SignInRequest"
      responses:
        "200":
          description: Successful login
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/AppResponseDto"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/SignInResponse"
        "401":
          description: Unauthorized - Invalid credentials
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  /auth/signup:
    post:
      tags:
        - Backend-Server / Authentication
      summary: User Registration
      description: Registers a new user and returns a JWT token.
      operationId: userRegistration
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SignupRequest"
      responses:
        "201":
          description: Successful registration
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/AppResponseDto"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/UserProfileResponse"
        "400":
          description: Bad Request - Invalid input data
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  
  # Tag: Me-Management
  /auth/user/me:
    get:
      tags:
        - Backend-Server / Authentication
      summary: Get Current User Profile
      description: Retrieves the profile information of the currently authenticated user.
      operationId: getCurrentUserProfile
      responses:
        "200":
          description: Successful retrieval of user profile
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/AppResponseDto"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/UserProfileResponse"
        "401":
          description: Unauthorized - Invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    patch: 
      tags:
        - Backend-Server / Authentication
      summary: Update Current User Profile
      description: Updates the profile information of the currently authenticated user.
      operationId: updateCurrentUserProfile
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserProfileUpdateRequest"
      responses:
        "200":
          description: Successful update of user profile
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/AppResponseDto"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/UserProfileResponse"
        "400":
          description: Bad Request - Invalid input data
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Unauthorized - Invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  
  /auth/user/me/avatar:
    patch:
      tags:
        - Backend-Server / Authentication
      summary: Update Current User Avatar
      description: Updates the profile avatar of the currently authenticated user. Accepts image file upload.
      operationId: updateCurrentUserAvatar
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                avatar:
                  type: string
                  format: binary
                  description: Avatar image file (JPG, PNG, GIF). Maximum size 5MB.
              required:
                - avatar
      responses:
        "200":
          description: Avatar updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/AppResponseDto"
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          avatarUrl:
                            type: string
                            format: uri
                            description: URL of the updated avatar image
                            example: "https://cdn.example.com/avatars/user_12345.jpg"
        "400":
          description: Bad Request - Invalid file format or size
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/Error"
                  - type: object
                    properties:
                      errorCode:
                        type: string
                        example: "INVALID_AVATAR_FILE"
                      message:
                        type: string
                        example: "Avatar must be a valid image file (JPG, PNG, GIF) and less than 5MB"
        "413":
          description: Payload Too Large - File size exceeds limit
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/Error"
                  - type: object
                    properties:
                      errorCode:
                        type: string
                        example: "FILE_TOO_LARGE"
                      message:
                        type: string
                        example: "Avatar file size must not exceed 5MB"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      tags:
        - Backend-Server / Authentication
      summary: Remove Current User Avatar
      description: Removes the profile avatar of the currently authenticated user, reverting to the default avatar.
      operationId: removeCurrentUserAvatar
      responses:
        "204":
          description: Avatar removed successfully
        "401":
          description: Unauthorized - Invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  # Tag: Admin User Management
  /admin/users:
    get:
      tags:
        - Backend-Server / Admin-UserManagement
      summary: Get All Users
      description: Retrieves a list of all users. Admin access required.
      operationId: getAllUsers
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number for pagination
        - name: pageSize
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: Number of users per page (1-100)
      responses:
        "200":
          description: Successful retrieval of user list
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/AppResponseDto"
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: "#/components/schemas/UserProfileResponse"
                      pagination:
                        $ref: "#/components/schemas/Pagination"
        "401":
          description: Unauthorized - Invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden - Admin access required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  /admin/users/{id}:
    get:
      tags:
        - Backend-Server / Admin-UserManagement
      summary: Get User by ID
      description: Retrieves a specific user by their unique ID. Admin access required.
      operationId: getUserById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Successful retrieval of user profile
          content:
            application/json:
              schema: 
                allOf:
                  - $ref: "#/components/schemas/AppResponseDto"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/UserProfileResponse"
        "401":
          description: Unauthorized - Invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Forbidden - Admin access required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Not Found - User does not exist
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  
  # Tag Group: AI Worker
  /outline/generate/stream:
    post:
      tags:
        - AI-Worker / OutlineGeneration
      summary: Generate Outline (Streaming)
      description: Generate a presentation outline with streaming response (Server-Sent Events)
      operationId: aiWorkerGenerateOutlineStream
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OutlineGenerateRequest'
      responses:
        '200':
          description: Stream of outline generation progress
          content:
            text/event-stream:
              schema:
                type: string
                description: Server-sent events with base64 encoded outline chunks
        '400':
          description: Bad request - invalid input parameters
        '500':
          description: Internal server error - outline generation failed
  /outline/generate:
    post:
      tags:
        - AI-Worker / OutlineGeneration
      summary: Generate Outline
      description: Generate a presentation outline based on the provided topic and parameters
      operationId: aiWorkerGenerateOutline
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OutlineGenerateRequest'
      responses:
        '200':
          description: Successfully generated outline
          content:
            application/json:
              schema:
                type: string
                description: Generated outline content
        '400':
          description: Bad request - invalid input parameters
        '500':
          description: Internal server error - outline generation failed
  /presentations/generate/:
    post:
      tags:
        - AI-Worker / PresentationGeneration
      summary: Generate Presentation
      description: Generate a complete presentation based on the provided outline and parameters. Notice the `/` was added because the endpoint must be unique. The original endpoint from AI-Worker is `/presentations/generate`.
      operationId: aiWorkerGeneratePresentation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PresentationGenerateRequest'
      responses:
        '200':
          description: Successfully generated presentation
          content:
            application/json:
              schema:
                type: object
                description: Generated presentation content
        '400':
          description: Bad request - invalid input parameters
        '500':
          description: Internal server error - presentation generation failed
  /presentations/generate/stream:
    post:
      tags:
        - AI-Worker / PresentationGeneration
      summary: Generate Presentation (Streaming)
      description: Generate a presentation with streaming response (Server-Sent Events)
      operationId: aiWorkerGeneratePresentationStream
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PresentationGenerateRequest'
      responses:
        '200':
          description: Stream of presentation generation progress
          content:
            text/event-stream:
              schema:
                type: string
                description: Server-sent events with JSON presentation objects
        '400':
          description: Bad request - invalid input parameters
        '500':
          description: Internal server error - presentation generation failed
  /image/generate:
    post:
      tags:
        - AI-Worker / ImageGeneration
      summary: Generate Image
      description: Generate images based on the provided prompt and parameters
      operationId: aiWorkerGenerateImage
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ImageGenerateRequest'
      responses:
        '200':
          description: Successfully generated image(s)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ImageGenerateResponse'
        '400':
          description: Bad request - invalid input parameters
        '500':
          description: Internal server error - image generation failed
  
components:
  schemas:
    SlideElement:
      type: object
      properties:
        type:
          type: string
        id:
          type: string
        left:
          type: number
        top:
          type: number
        width:
          type: number
        height:
          type: number
        viewBox:
          type: array
          items:
            type: integer
        path:
          type: string
        fill:
          type: string
        fixedRatio:
          type: boolean
        opacity:
          type: number
        rotate:
          type: integer
        flipV:
          type: boolean
        lineHeight:
          type: number
        content:
          type: string
        defaultFontName:
          type: string
        defaultColor:
          type: string
        start:
          type: array
          items:
            type: integer
        end:
          type: array
          items:
            type: integer
        points:
          type: array
          items:
            type: string
        color:
          type: string
        style:
          type: string
        wordSpace:
          type: integer
    Slide:
      type: object
      properties:
        id:
          type: string
        elements:
          type: array
          items:
            $ref: "#/components/schemas/SlideElement"
        background:
          type: object
          properties:
            type:
              type: string
            color:
              type: string
    Error:
      type: object
      properties:
        success:
          type: boolean
          example: false
        code:
          type: integer
        errorCode:
          type: string
        message:
          type: string
        timestamp:
          type: string
          format: date-time
    AIPresentation:
      description: Union type representing any slide accepted by the AI-PPT generator.
      oneOf:
        - $ref: "#/components/schemas/CoverSlide"
        - $ref: "#/components/schemas/ContentsSlide"
        - $ref: "#/components/schemas/TransitionSlide"
        - $ref: "#/components/schemas/ContentSlide"
        - $ref: "#/components/schemas/EndSlide"
    CoverSlide:
      type: object
      description: Cover slide containing the presentation's main title and a subtitle/teaser text.
      additionalProperties: false
      properties:
        type:
          type: string
          enum: ["cover"]
        data:
          type: object
          additionalProperties: false
          properties:
            title:
              type: string
            text:
              type: string
          required: ["title", "text"]
      required: ["type", "data"]
    ContentsSlide:
      type: object
      description: Table-of-contents slide listing the main sections or agenda items.
      additionalProperties: false
      properties:
        type:
          type: string
          enum: ["contents"]
        data:
          type: object
          additionalProperties: false
          properties:
            items:
              type: array
              items:
                type: string
              minItems: 1
          required: ["items"]
      required: ["type", "data"]
    TransitionSlide:
      type: object
      description: Section-transition slide that introduces a new part of the presentation.
      additionalProperties: false
      properties:
        type:
          type: string
          enum: ["transition"]
        data:
          type: object
          additionalProperties: false
          properties:
            title:
              type: string
            text:
              type: string
          required: ["title", "text"]
      required: ["type", "data"]
    ContentSlide:
      type: object
      description: Standard content slide with a title and one or more bullet-style items, each having its own title and text.
      additionalProperties: false
      properties:
        type:
          type: string
          enum: ["content"]
        data:
          type: object
          additionalProperties: false
          properties:
            title:
              type: string
            items:
              type: array
              items:
                type: object
                additionalProperties: false
                properties:
                  title:
                    type: string
                  text:
                    type: string
                required: ["title", "text"]
              minItems: 1
          required: ["title", "items"]
      required: ["type", "data"]
    EndSlide:
      type: object
      description: Closing slide signalling the end of the presentation (often just displays "Thank you" or similar).
      additionalProperties: false
      properties:
        type:
          type: string
          enum: ["end"]
      required: ["type"]
    AppResponseDto:
      type: object
      properties:
        success:
          type: boolean
          example: true
        code:
          type: integer
          format: int32
          example: 200
        message:
          type: string
    ModelResponse:
      type: object
      properties:
        modelId:
          type: string
        modelName:
          type: string
        displayName:
          type: string
        enabled:
          type: boolean
        default:
          type: boolean
        modelType:
          type: string
          enum: ["TEXT", "IMAGE"]
    Pagination:
      properties:
        currentPage:
          description: The current page number (1-based indexing)
          example: 1
        pageSize:
          description: Number of items per page
          example: 10
        totalItems:
          description: Total number of items across all pages
          example: 100
        totalPages:
          description: Total number of available pages
          example: 10
    Presentation:
      type: object
      description: Presentation response schema matching the /presentations/{id} GET endpoint
      properties:
        id:
          type: string
          description: Unique identifier for the presentation
          example: "12345"
        title:
          type: string
          description: Title of the presentation
          example: "My Awesome Presentation"
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the presentation was created
          example: "2025-08-30T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the presentation was last updated
          example: "2025-08-30T15:45:00Z"
        slides:
          type: array
          description: Array of slides in the presentation
          items:
            $ref: "#/components/schemas/Slide"
    ImageGenerationRequest:
      type: object
      properties:
        prompt:
          type: string
          description: The text prompt to generate the image from.
          example: "A beautiful sunset over a mountain landscape"
        aspectRatio:
          type: string
          description: The aspect ratio of the generated image.
          default: "1:1"
          example: "16:9"
        artStyle:
          type: string
          description: the 
          example: "cartoon"
        artDescription:
          type: string
          example: "something"
        themeStyle:
          type: string
          example: "something"
        themeDescription:
          type: string
          example: "something"
        model:
          type: string
          description: AI model
          example: "gpt-4o"
        provider:
          type: string
          description: provider of AI model
          example: "openai"
      required:
        - prompt
    ImageGenerationResponse:
      type: object
      properties:
        url:
          type: [string, "null"]
          format: uri
          description: The URI of the generated image.
        mimeType:
          type: string
          description: The MIME type of the generated image.
          example: "image/png"
        prompt:
          type: string
          description: The prompt used to generate the image.
          example: "A beautiful sunset over a mountain landscape"
        created:
          type: string
          format: date-time
          description: The timestamp when the image was created.
          example: "2025-09-01T12:00:00Z"
    
    MediaResponse:
      type: object
      properties:
        id:
          type: string
          description: Unique identifier for the media
        originalFilename:
          type: string
          description: Original filename of the media
        url:
          type: string
          format: uri
          description: URL to access the media from CDN
        mediaType:
          type: string
          description: Type of the media (e.g., image/png)
        fileSize:
          type: integer
          description: Size of the file in bytes
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the media was created
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the media was last updated

    AI-Result:
      type: object
      properties:
        id:
          type: integer
        createdAt:
          type: string
          format: date-time
        presentationId:
          type: string
        result:
          type: string
    HTTPValidationError:
      properties:
          detail:
              items:
                  $ref: '#/components/schemas/ValidationError'
              type: array
              title: Detail
      type: object
      title: HTTPValidationError
    ImageGenerateRequest:
      properties:
          prompt:
              type: string
              title: Prompt
          model:
              type: string
              title: Model
          provider:
              type: string
              title: Provider
          number_of_images:
              type: integer
              title: Number Of Images
              description: Number of images to generate
              default: 1
          aspect_ratio:
            type: string
            enum:
                - '1:1'
                - '9:16'
                - '16:9'
                - '4:3'
                - '3:4'
            title: Aspect Ratio
            description: 'Desired image dimensions, format: WIDTHxHEIGHT'
            default: '1:1'
          safety_filter_level:
            anyOf:
              - type: string
                enum:
                  - block_most
                  - block_some
                  - block_few
                  - block_fewest
              - type: "null"
            title: Safety Filter Level
            description: 'Safety filter level: block_most, block_some, block_few, block_fewest'
            default: block_few
          person_generation:
              anyOf:
                - type: string
                  enum:
                    - dont_allow
                    - allow_adult
                    - allow_all
                - type: "null"
              title: Person Generation
              description: 'Person generation: dont_allow, allow_adult, allow_all'
              default: allow_all
          seed:
              anyOf:
                  - type: integer
                  - type: "null"
              title: Seed
              description: Random seed for reproducible generation
          negative_prompt:
              anyOf:
                  - type: string
                  - type: "null"
              title: Negative Prompt
              description: Negative prompt to avoid certain elements in the image
      type: object
      required:
          - prompt
          - model
          - provider
      title: ImageGenerateRequest
    ImageGenerateResponse:
        properties:
            images:
                items:
                    type: string
                type: array
                title: Images
                description: Base64 encoded images data (without mime prefix)
            error:
                anyOf:
                    - type: string
                    - type: "null"
                title: Error
                description: Error message if image generation failed
            count:
                type: integer
                title: Count
                description: Number of Images
                default: 1
        type: object
        required:
            - images
        title: ImageGenerateResponse
    OutlineGenerateRequest:
        properties:
            topic:
                type: string
                title: Topic
                description: The topic for the presentation
            model:
                type: string
                title: Model
                description: The model to use for generation
            provider:
                type: string
                title: Provider
                description: The provider of the model
            language:
                type: string
                title: Language
                description: The language for the presentation
            slide_count:
                type: integer
                title: Slide Count
                description: The number of slides to generate
        type: object
        required:
            - topic
            - model
            - provider
            - language
            - slide_count
        title: OutlineGenerateRequest
    PresentationGenerateRequest:
        properties:
            model:
                type: string
                title: Model
                description: The model to use for generation
            provider:
                type: string
                title: Provider
                description: The provider of the model
            language:
                type: string
                title: Language
                description: The language for the presentation
            slide_count:
                type: integer
                title: Slide Count
                description: The number of slides to generate
            outline:
                type: string
                title: Outline
                description: The outline for the presentation
            meta_data:
                anyOf:
                    - additionalProperties: True
                      type: object
                    - type: "null"
                title: Meta Data
                description: Additional metadata for the presentation
        type: object
        required:
            - model
            - provider
            - language
            - slide_count
            - outline
        title: PresentationGenerateRequest
    ValidationError:
        properties:
            loc:
                items:
                    anyOf:
                        - type: string
                        - type: integer
                type: array
                title: Location
            msg:
                type: string
                title: Message
            type:
                type: string
                title: Error Type
        type: object
        required:
            - loc
            - msg
            - type
        title: ValidationError
    # Mindmap nodes schemas
    MindmapBaseNode:
      type: object
      properties:
        id:
          type: string
          description: Unique identifier for the node. Unique within the its mindmap.
    MindmapTextNode:
      allOf:
        - $ref: "#/components/schemas/MindmapBaseNode"
        - type: object
          properties:
            type:
              type: string
              enum: ["mindmapTextNode"]
            content:
              type: string
              description: Text content of the node
    MindmapRootNode:
      allOf:
        - $ref: "#/components/schemas/MindmapBaseNode"
        - type: object
          properties:
            type:
              type: string
              enum: ["mindmapRootNode"]
            content:
              type: string
              description: Text content of the root node
            MindmappathType:
              enum: ["smoothstep", "straight", "bezier"]
              description: Style of the path connecting nodes
            edgeColor:
              anyOf:
                - type: string
                - type: "null"
              description: Hex color for the edges connecting nodes
              example: "#FF5733"
    MindmapShapeNode:
      allOf:
        - $ref: "#/components/schemas/MindmapBaseNode"
        - type: object
          properties:
            type:
              type: string
              enum: ["mindmapShapeNode"]
            shape:
              type: [string, "null"]
              enum: ["rectangle", "circle", "ellipse"]
              description: Shape of the node (e.g., rectangle, circle)
            width:
              type: [number, "null"]
              description: Width of the shape node
            height:
              type: [number, "null"]
              description: Height of the shape node
        - type: object
          properties:
            type:
              type: string
              enum: ["mindmapImageNode"]
            imageUrl:
              type: string
              format: uri
              description: URL of the image for the node
            width:
              type: number
              description: Width of the image node
            height:
              type: [number, "null"]
              description: Height of the image node
            alt:
              type: [string, "null"]          
              description: Alt text for the image node
    MindmapImageNode:
      allOf:
        - $ref: "#/components/schemas/MindmapBaseNode"
        - type: object
          properties:
            type:
              type: string
              enum: ["mindmapImageNode"]
            imageUrl:
              type: string
              format: uri
              description: URL of the image for the node
            width:
              anyOf:
                - type: number
                - type: "null"
              description: Width of the image node
            height:
              anyOf:
                - type: number
                - type: "null"
              description: Height of the image node
            alt:
              anyOf:
                - type: string
                - type: "null"
              description: Alt text for the image node
    MindmapNode:
      description: Union type representing any node in the mindmap
      discriminator:
        propertyName: type
        mapping:
          mindmapTextNode: "#/components/schemas/MindmapTextNode"
          mindmapRootNode: "#/components/schemas/MindmapRootNode"
          mindmapShapeNode: "#/components/schemas/MindmapShapeNode"
          mindmapImageNode: "#/components/schemas/MindmapImageNode"
      oneOf:
        - $ref: "#/components/schemas/MindmapTextNode"
        - $ref: "#/components/schemas/MindmapRootNode"
        - $ref: "#/components/schemas/MindmapShapeNode"
        - $ref: "#/components/schemas/MindmapImageNode"
    Mindmap:
      type: object
      description: Mindmap response schema
      properties:
        id:
          type: string
          description: Unique identifier for the mindmap
        title:
          type: string
          description: Title of the mindmap (or the filename)
        description:
          type: [string, "null"]
          description: Description of the mindmap
        nodes:
          type: array
          description: Array of nodes in the mindmap
          items:
            $ref: "#/components/schemas/MindmapNode"
        edges:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
                description: The unique identifier for the edge
              type:
                type: string
                description: The type of the edge
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the mindmap was created
          example: "2025-08-30T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the mindmap was last updated
          example: "2025-08-30T15:45:00Z"
    # AI worker components

    ErrorResponse:
      type: object
      properties:
        detail:
          type: string
          description: Error message details
          example: "Invalid input parameters"

    # User management
    UserProfileResponse:
      type: object
      properties:
        id:
          type: string
          description: Unique identifier for the user
          example: "user_12345"
        email:
          type: string
          format: email
          description: User's email address
          example: "user@example.com"
        firstName:
          type: string
          description: User's first name
          example: "John"
        lastName:
          type: string
          description: User's last name
          example: "Doe"
        dateOfBirth:
          type: string
          format: date
          description: User's date of birth
          example: "1990-01-01"
        avatarUrl:
          type: [string, "null"]
          format: uri
          description: URL of the user's profile avatar
          example: "https://cdn.example.com/avatars/user_12345.jpg"
        
        createdAt:
          type: string
          format: date-time
          description: Timestamp when the user profile was created
          example: "2025-08-30T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Timestamp when the user profile was last updated
          example: "2025-08-30T15:45:00Z"
        phoneNumber:
          type: [string, "null"]
          description: User's phone number (optional)
          example: "+1234567890"
    SignInResponse:
      type: object
      properties:
        access_token:
          type: string
          description: JWT access token for authenticated requests
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        refresh_token:
          type: string
          description: JWT refresh token for obtaining new access tokens
          example: "dGhpc0lzQVRlc3RSZWZyZXNoVG9rZW4..."
        token_type:
          type: string
          description: Type of the token, typically "Bearer"
          example: "Bearer"
        expires_in:
          type: integer
          description: Expiration time of the access token in seconds
          example: 3600
    SignInRequest:
      type: object
      properties:
        email:
          type: string
          format: email
          description: User's email address
          example: "user@example.com"
        password:
          type: string
          description: User's password
          example: "password123"
    SignupRequest:
      type: object
      properties:
        email:
          type: string
          format: email
          description: User's email address
          example: "user@example.com"
        password:
          type: string
          description: User's password
          example: "Password@123"
        firstName:
          type: string
          description: User's first name
          example: "John"
        lastName:
          type: string
          description: User's last name
          example: "Doe"
        dateOfBirth:
          type: string
          format: date
          description: User's date of birth
          example: "1990-01-01"
        phoneNumber:
          type: string
          description: User's phone number (optional)
          example: "+1234567890"
    UserProfileUpdateRequest:
      type: object
      properties:
        firstName:
          type: string
          description: User's first name
          example: "John"
        lastName:
          type: string
          description: User's last name
          example: "Doe"
        dateOfBirth:
          type: string
          format: date
          description: User's date of birth (must be in the past)
          example: "1990-01-01"